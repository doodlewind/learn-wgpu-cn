<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº | å­¦ä¹  Wgpu</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta property="article:modified_time" content="2022-04-24T08:18:08.000Z">
    <meta property="og:site_name" content="å­¦ä¹  Wgpu">
    <meta property="og:title" content="é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/beginner/tutorial4-buffer/">
    <meta name="twitter:title" content="é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº">
    <meta name="twitter:url" content="/beginner/tutorial4-buffer/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Benjamin Hansen">
    <meta name="twitter:creator" content="https://twitter.com/sotrh760">
    
    <link rel="preload" href="/learn-wgpu-cn/assets/css/0.styles.9735b80e.css" as="style"><link rel="preload" href="/learn-wgpu-cn/assets/js/app.4ff5359b.js" as="script"><link rel="preload" href="/learn-wgpu-cn/assets/js/4.7de995c5.js" as="script"><link rel="preload" href="/learn-wgpu-cn/assets/js/10.7328fa8a.js" as="script"><link rel="preload" href="/learn-wgpu-cn/assets/js/25.997fcfd2.js" as="script"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/1.5a74b06a.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/11.7ede3084.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/12.1618c781.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/13.8ed4ca2f.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/14.27582479.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/15.866ab171.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/16.65e20a6a.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/17.13dd0d98.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/18.0b7e17b3.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/19.e99c2c0b.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/2.1ff473f9.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/20.e60a9b69.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/21.640f3b7f.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/22.5e9abdb4.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/23.428ad388.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/24.ddf53bad.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/26.d0cb4a73.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/27.4b3c16d0.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/28.e072a203.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/29.126bb05e.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/30.661cb844.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/31.4d3f435a.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/32.e5012b0b.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/33.336b62e7.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/34.08650f25.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/35.20773e94.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/5.79560850.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/6.4f6de209.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/7.430483e0.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/8.24d6fd2e.js"><link rel="prefetch" href="/learn-wgpu-cn/assets/js/9.0426af3e.js">
    <link rel="stylesheet" href="/learn-wgpu-cn/assets/css/0.styles.9735b80e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="inner"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-wgpu-cn/" class="home-link router-link-active"><!----> <span class="site-name">å­¦ä¹  Wgpu</span></a> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="docs-layout"><aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/learn-wgpu-cn/" aria-current="page" class="sidebar-link">ä»‹ç»</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>å…¥é—¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu-cn/beginner/tutorial1-window/" class="sidebar-link">ä¾èµ–ä¸çª—å£</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial2-surface/" class="sidebar-link">ä½¿ç”¨ Surface</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial3-pipeline/" class="sidebar-link">ä½¿ç”¨ Pipeline</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/" aria-current="page" class="active sidebar-link">é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#ç»ˆäºè®²åˆ°è¿™é‡Œäº†" class="sidebar-link">ç»ˆäºè®²åˆ°è¿™é‡Œäº†ï¼</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#ä»€ä¹ˆæ˜¯ç¼“å†²åŒº" class="sidebar-link">ä»€ä¹ˆæ˜¯ç¼“å†²åŒºï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#é¡¶ç‚¹ç¼“å†²åŒº" class="sidebar-link">é¡¶ç‚¹ç¼“å†²åŒº</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#ç„¶åè¯¥æ€ä¹ˆåšå‘¢" class="sidebar-link">ç„¶åè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#ç´¢å¼•ç¼“å†²åŒº" class="sidebar-link">ç´¢å¼•ç¼“å†²åŒº</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#é¢œè‰²æ ¡æ­£" class="sidebar-link">é¢œè‰²æ ¡æ­£</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu-cn/beginner/tutorial4-buffer/#å°æµ‹éªŒ" class="sidebar-link">å°æµ‹éªŒ</a></li></ul></li><li><a href="/learn-wgpu-cn/beginner/tutorial5-textures/" class="sidebar-link">çº¹ç†ä¸ BindGroup</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial6-uniforms/" class="sidebar-link">Uniform ç¼“å†²åŒºä¸ 3D ç›¸æœº</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial7-instancing/" class="sidebar-link">å®ä¾‹åŒ–ç»˜åˆ¶</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial8-depth/" class="sidebar-link">æ·±åº¦ç¼“å†²åŒº</a></li><li><a href="/learn-wgpu-cn/beginner/tutorial9-models/" class="sidebar-link">åŠ è½½æ¨¡å‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è¿›é˜¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu-cn/intermediate/tutorial10-lighting/" class="sidebar-link">ğŸš§ å¤„ç†å…‰ç…§æ•ˆæœ</a></li><li><a href="/learn-wgpu-cn/intermediate/tutorial11-normals/" class="sidebar-link">ğŸš§ æ³•çº¿è´´å›¾</a></li><li><a href="/learn-wgpu-cn/intermediate/tutorial12-camera/" class="sidebar-link">ğŸš§ æ›´å¥½çš„ç›¸æœº</a></li><li><a href="/learn-wgpu-cn/intermediate/tutorial13-threading/" class="sidebar-link">ğŸš§ åŸºäº Wgpu å’Œ Rayon çš„å¤šçº¿ç¨‹</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¡ˆä¾‹å±•ç¤º</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ›´æ–°åŠ¨æ€</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº"><a href="#é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº" class="header-anchor">#</a> é¡¶ç‚¹ç¼“å†²åŒºä¸ç´¢å¼•ç¼“å†²åŒº</h1> <h2 id="ç»ˆäºè®²åˆ°è¿™é‡Œäº†"><a href="#ç»ˆäºè®²åˆ°è¿™é‡Œäº†" class="header-anchor">#</a> ç»ˆäºè®²åˆ°è¿™é‡Œäº†ï¼</h2> <p>ä½ å¯èƒ½å·²ç»åŒå€¦äº†å‰æ–‡ä¸­ã€Œæˆ‘ä»¬åˆ°è®¨è®º <code>Buffer</code> æ—¶å†ä»‹ç»è¿™ä¸ªã€ä¹‹ç±»çš„è¯ã€‚ç°åœ¨ç»ˆäºåˆ°äº†è®¨è®ºå®ƒçš„æ—¶å€™äº†ï¼Œä½†é¦–å…ˆâ€¦â€¦</p> <h2 id="ä»€ä¹ˆæ˜¯ç¼“å†²åŒº"><a href="#ä»€ä¹ˆæ˜¯ç¼“å†²åŒº" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ç¼“å†²åŒºï¼Ÿ</h2> <p>ä¸€æ®µç¼“å†²åŒºå°±æ˜¯ GPU ä¸Šçš„ä¸€ä¸ªæ•°æ®å—ã€‚ç¼“å†²åŒºæ˜¯è¿ç»­çš„ï¼Œè¿™æ„å‘³ç€å…¶ä¸­æ‰€æœ‰æ•°æ®éƒ½ä¼šæŒ‰é¡ºåºå­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ç¼“å†²åŒºé€šå¸¸ç”¨äºå­˜å‚¨ struct æˆ–æ•°ç»„è¿™æ ·ç®€å•çš„ç»“æ„ï¼Œä½†å®ƒä¹Ÿå¯ä»¥å­˜å‚¨æ›´å¤æ‚çš„å†…å®¹ï¼Œå¦‚æ ‘ç­‰å›¾å¼æ•°æ®ç»“æ„ï¼ˆåªè¦æ‰€æœ‰èŠ‚ç‚¹éƒ½å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¸å¼•ç”¨ç¼“å†²åŒºä»¥å¤–çš„å†…å®¹å³å¯ï¼‰ã€‚æˆ‘ä»¬å°†ç»å¸¸ä½¿ç”¨ç¼“å†²åŒºï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä»ä¸¤ç§æœ€é‡è¦çš„ç¼“å†²åŒºå¼€å§‹ï¼šé¡¶ç‚¹ç¼“å†²åŒºï¼ˆvertex bufferï¼‰å’Œç´¢å¼•ç¼“å†²åŒºï¼ˆindex bufferï¼‰ã€‚</p> <h2 id="é¡¶ç‚¹ç¼“å†²åŒº"><a href="#é¡¶ç‚¹ç¼“å†²åŒº" class="header-anchor">#</a> é¡¶ç‚¹ç¼“å†²åŒº</h2> <p>åœ¨å…ˆå‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›¸å½“äºæ˜¯åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ç¡¬ç¼–ç äº†é¡¶ç‚¹æ•°æ®ã€‚è™½ç„¶è¿™ç§æ–¹å¼åœ¨å¯åŠ¨é˜¶æ®µå¾ˆæ–¹ä¾¿ï¼Œä½†è¿™æ˜¯ä¸åˆ©äºé•¿è¿œç»´æŠ¤çš„ã€‚æˆ‘ä»¬éœ€è¦ç»˜åˆ¶çš„å„ç±»å¯¹è±¡ä¼šæœ‰ä¸åŒçš„å¤§å°ï¼Œå¹¶ä¸”å¦‚æœæ¯å½“æ›´æ–°æ¨¡å‹æ—¶å°±è¦é‡æ–°ç¼–è¯‘ç€è‰²å™¨ï¼Œé‚£ä¼šå¤§å¤§æ‹–æ…¢ç¨‹åºé€Ÿåº¦ã€‚ä½œä¸ºæ›¿ä»£ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¼“å†²åŒºæ¥å­˜å‚¨å¾…ç»˜åˆ¶çš„é¡¶ç‚¹æ•°æ®ã€‚ä¸è¿‡åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦å…ˆæè¿°æ¸…æ¥šé¡¶ç‚¹çš„ç»“æ„ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„ struct æ¥è¯´æ˜è¿™ä¸€ç‚¹ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>
<span class="token attribute attr-name">#[repr(C)]</span>
<span class="token attribute attr-name">#[derive(Copy, Clone, Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Vertex</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ä¸€ä¸ªä½ç½®å­—æ®µå’Œä¸€ä¸ªé¢œè‰²å­—æ®µï¼Œä½ç½®è¡¨ç¤ºé¡¶ç‚¹åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„åæ ‡ï¼Œè€Œé¢œè‰²åˆ™å¯¹åº”é¡¶ç‚¹çš„ RGB è‰²å€¼ã€‚æˆ‘ä»¬éœ€è¦è®© <code>Vertex</code> æ”¯æŒ <code>Copy</code> traitï¼Œè¿™æ ·å°±å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºç¼“å†²åŒºäº†ã€‚</p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»„æˆä¸‰è§’å½¢çš„å®é™…æ•°æ®ï¼Œåœ¨ <code>Vertex</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>
<span class="token keyword">const</span> <span class="token constant">VERTICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vertex</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬æŒ‰é€†æ—¶é’ˆé¡ºåºæ’åˆ—é¡¶ç‚¹ï¼Œå…¶ä½ç½®ä¾æ¬¡æ˜¯ä¸Šã€å·¦ä¸‹å’Œå³ä¸‹ã€‚è¿™æ ·åšçš„ä¸€éƒ¨åˆ†ç†ç”±æ˜¯å‡ºäºä¼ ç»Ÿä¹ æƒ¯è€ƒè™‘ï¼Œä½†ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ <code>render_pipeline</code> çš„ <code>primitive</code> ä¸­è§„å®šï¼Œæˆ‘ä»¬å¸Œæœ›ä¸‰è§’å½¢çš„ <code>front_face</code> é…ç½®æ˜¯ <code>wgpu::FrontFace::Ccw</code>ï¼Œè¿™æ ·å°±å¯ä»¥å‰”é™¤ä½äºç‰©ä½“èƒŒé¢çš„é¢ã€‚è¿™æ„å‘³ç€å¯¹æ‰€æœ‰åº”è¯¥é¢å‘æˆ‘ä»¬çš„ä¸‰è§’å½¢ï¼Œå…¶é¡¶ç‚¹éƒ½åº”è¯¥æŒ‰é€†æ—¶é’ˆé¡ºåºæ’åˆ—ã€‚</p> <p>æœ‰äº†é¡¶ç‚¹æ•°æ®åï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªç¼“å†²åŒºä¸­ã€‚ä¸ºæ­¤å¯ç»™ <code>State</code> æ·»åŠ ä¸€ä¸ª <code>vertex_buffer</code> å­—æ®µï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">State</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    render_pipeline<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">RenderPipeline</span><span class="token punctuation">,</span>

    <span class="token comment">// NEW!</span>
    vertex_buffer<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Buffer</span><span class="token punctuation">,</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨å°±å¯ä»¥åœ¨ <code>new()</code> ä¸­åˆ›å»ºç¼“å†²åŒºäº†ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// new()</span>
<span class="token keyword">let</span> vertex_buffer <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_buffer_init</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span>util<span class="token punctuation">::</span></span><span class="token class-name">BufferInitDescriptor</span> <span class="token punctuation">{</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;Vertex Buffer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contents<span class="token punctuation">:</span> <span class="token namespace">bytemuck<span class="token punctuation">::</span></span><span class="token function">cast_slice</span><span class="token punctuation">(</span><span class="token constant">VERTICES</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferUsages</span><span class="token punctuation">::</span><span class="token constant">VERTEX</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸ºäº†èƒ½è®¿é—® <code>wgpu::Device</code> ä¸Šçš„ <code>create_buffer_init</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å¯¼å…¥ <a href="https://docs.rs/wgpu/0.12.0/wgpu/util/trait.DeviceExt.html#tymethod.create_buffer_init" target="_blank" rel="noopener noreferrer">DeviceExt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿™ä¸ªæ‰©å±• traitã€‚å…³äºæ‰©å±• trait çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a href="http://xion.io/post/code/rust-extension-traits.html" target="_blank" rel="noopener noreferrer">è¿™ç¯‡æ–‡ç« <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>è¦å¯¼å…¥æ‰©å±• traitï¼Œéœ€è¦åœ¨ <code>main.rs</code> é¡¶éƒ¨çš„æŸå¤„è¾“å…¥è¿™ä¸€è¡Œï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> <span class="token namespace">wgpu<span class="token punctuation">::</span>util<span class="token punctuation">::</span></span><span class="token class-name">DeviceExt</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://docs.rs/bytemuck/1.2.0/bytemuck/" target="_blank" rel="noopener noreferrer">bytemuck<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å°†æˆ‘ä»¬çš„ <code>VERTICES</code> è½¬æ¢æˆäº† <code>&amp;[u8]</code>ã€‚<code>create_buffer_init()</code> æ–¹æ³•éœ€è¦ä¼ å…¥ <code>&amp;[u8]</code>ï¼Œè€Œ <code>bytemuck::cast_slice</code> èƒ½å®ç°è¿™ä¸ªè½¬æ¢ã€‚ä¸ºæ­¤åº”åœ¨ <code>Cargo.toml</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">bytemuck</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;1.4&quot;</span><span class="token punctuation">,</span> <span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;derive&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬è¿˜éœ€è¦å®ç°ä¸¤ä¸ª trait æ¥ä½¿ <code>bytemuck</code> å·¥ä½œï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ <a href="https://docs.rs/bytemuck/1.3.0/bytemuck/trait.Pod.html" target="_blank" rel="noopener noreferrer">bytemuck::Pod<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://docs.rs/bytemuck/1.3.0/bytemuck/trait.Zeroable.html" target="_blank" rel="noopener noreferrer">bytemuck::Zeroable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚<code>Pod</code> è¡¨ç¤ºæˆ‘ä»¬çš„ <code>Vertex</code> æ˜¯æœ´ç´ çš„ PLDï¼ˆ<a href="https://zh.wikipedia.org/wiki/POD_(%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1)" target="_blank" rel="noopener noreferrer">Plain Old Data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰æ•°æ®ï¼Œå› æ­¤å¯ä»¥å°†å…¶ç±»å‹è½¬ä¸º <code>&amp;[u8]</code>ã€‚è€Œ <code>Zeroable</code> åˆ™è¡¨ç¤ºå¯ä»¥å¯¹å…¶ä½¿ç”¨ <code>std::mem::zeroed()</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>Vertex</code> struct æ¥æ´¾ç”Ÿå‡ºè¿™äº›æ–¹æ³•ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[repr(C)]</span>
<span class="token attribute attr-name">#[derive(Copy, Clone, Debug, bytemuck::Pod, bytemuck::Zeroable)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Vertex</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="note"><p>å¦‚æœä½ çš„ struct åŒ…å«äº†æ²¡æœ‰å®ç° <code>Pod</code> å’Œ <code>Zeroable</code> çš„ç±»å‹ï¼Œé‚£ä¹ˆä½ éœ€è¦æ‰‹åŠ¨å®ç°è¿™äº› traitã€‚ä½†ç”±äºè¿™äº› trait ä¸éœ€è¦æˆ‘ä»¬å®ç°ä»»ä½•æ–¹æ³•ï¼Œå› æ­¤åªéœ€åƒä¸‹é¢è¿™æ ·å³å¯è®©ä»£ç å·¥ä½œï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">unsafe</span> <span class="token keyword">impl</span> <span class="token namespace">bytemuck<span class="token punctuation">::</span></span><span class="token class-name">Pod</span> <span class="token keyword">for</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">unsafe</span> <span class="token keyword">impl</span> <span class="token namespace">bytemuck<span class="token punctuation">::</span></span><span class="token class-name">Zeroable</span> <span class="token keyword">for</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></div> <p>æœ€åæˆ‘ä»¬å°±å¯ä»¥å°† <code>vertex_buffer</code> æ·»åŠ åˆ° <code>State</code> struct ä¸­äº†ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">Self</span> <span class="token punctuation">{</span>
    surface<span class="token punctuation">,</span>
    device<span class="token punctuation">,</span>
    queue<span class="token punctuation">,</span>
    config<span class="token punctuation">,</span>
    size<span class="token punctuation">,</span>
    render_pipeline<span class="token punctuation">,</span>
    vertex_buffer<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç„¶åè¯¥æ€ä¹ˆåšå‘¢"><a href="#ç„¶åè¯¥æ€ä¹ˆåšå‘¢" class="header-anchor">#</a> ç„¶åè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</h2> <p>æˆ‘ä»¬éœ€è¦è®© <code>render_pipeline</code> åœ¨ç»˜åˆ¶æ—¶ä½¿ç”¨è¿™ä¸ªç¼“å†²åŒºï¼Œä½†åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ <code>render_pipeline</code> è¯¥å¦‚ä½•è¯»å–å®ƒã€‚ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥ç”¨ <code>VertexBufferLayout</code> å’Œ <code>vertex_buffers</code> å­—æ®µæ¥å®Œæˆè¿™ä¸€è¿‡ç¨‹ï¼Œè¿™åœ¨å‰é¢åˆ›å»º <code>render_pipeline</code> æ—¶ä¹Ÿæœ‰æ‰€æåŠã€‚</p> <p><code>VertexBufferLayout</code> å®šä¹‰äº†ç¼“å†²åŒºåœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºæ–¹å¼ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼Œ<code>render_pipeline</code> å°±ä¸çŸ¥é“è¯¥å¦‚ä½•åœ¨ç€è‰²å™¨ä¸­æ˜ å°„ç¼“å†²åŒºã€‚ä¸‹é¢çš„æè¿°ç¬¦é…ç½®å®šä¹‰å‡ºäº†ä¸€ä¸ªå……æ»¡äº† <code>Vertex</code> æ•°æ®çš„ç¼“å†²åŒºï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span> <span class="token punctuation">{</span>
    array_stride<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">Vertex</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span> <span class="token comment">// 1.</span>
    step_mode<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexStepMode</span><span class="token punctuation">::</span><span class="token class-name">Vertex</span><span class="token punctuation">,</span> <span class="token comment">// 2.</span>
    attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span> <span class="token comment">// 3.</span>
        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
            offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 4.</span>
            shader_location<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 5.</span>
            format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x3</span><span class="token punctuation">,</span> <span class="token comment">// 6.</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
            offset<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
            shader_location<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x3</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»£ç æ³¨é‡Šä¸­æ ‡æ³¨å‡ºçš„é‡è¦äº‹é¡¹å¦‚ä¸‹ï¼š</p> <ol><li><code>array_stride</code> å®šä¹‰äº†æ¯ä¸ªé¡¶ç‚¹çš„å®½åº¦ã€‚å½“ç€è‰²å™¨è¯»å–ä¸‹ä¸€ä¸ªé¡¶ç‚¹æ—¶ï¼Œå®ƒå°†å‘å‰è·³è¿‡ <code>array_stride</code> å¯¹åº”çš„å­—èŠ‚æ•°ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ<code>array_stride</code> åº”å½“æ˜¯ 24 å­—èŠ‚å·¦å³ã€‚</li> <li><code>step_mode</code> å‘Šè¯‰ pipeline åº”ä»¥æ€æ ·çš„é¢‘ç‡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡¶ç‚¹ã€‚åœ¨ç°åœ¨çš„ä¾‹å­ä¸­è¿™ä¼¼ä¹æœ‰ç‚¹å¤šä½™ï¼Œä½†å¦‚æœæˆ‘ä»¬åªæƒ³åœ¨å¼€å§‹è¿›è¡Œä¸€æ¬¡æ–°å®ä¾‹åŒ–ç»˜åˆ¶æ—¶æ”¹å˜é¡¶ç‚¹ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸º <code>wgpu::VertexStepMode::Instance</code>ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„æ•™ç¨‹ä¸­ä»‹ç»å®ä¾‹åŒ–ç»˜åˆ¶ï¼ˆinstancingï¼‰ã€‚</li> <li><code>attributes</code> æè¿°äº†é¡¶ç‚¹ä¸­å„ä¸ªå±æ€§ï¼ˆattributeï¼‰çš„ç»“æ„ã€‚ä¸€èˆ¬æ¥è¯´è¿™æ˜¯ä¸ Rust struct ä¸­å­—æ®µ 1:1 çš„æ˜ å°„ï¼Œåœ¨ç°æœ‰ä¾‹å­ä¸­å°±æ˜¯å¦‚æ­¤ã€‚</li> <li><code>offset</code> å®šä¹‰äº†æ¯ä¸ªå±æ€§å¼€å§‹å‰åº”åç§»çš„å­—èŠ‚æ•°ã€‚å¯¹é¡¶ç‚¹çš„ç¬¬ä¸€ä¸ªå±æ€§ï¼Œå…¶åç§»é‡é€šå¸¸ä¸ºé›¶ã€‚å¯¹æ‰€æœ‰åé¢çš„å±æ€§ï¼Œå…¶åç§»é‡åº”ä¸ºåœ¨å…¶ä¹‹å‰å„å±æ€§çš„ <code>size_of</code> ä¹‹å’Œã€‚</li> <li>è¿™é‡Œå‘Šè¯‰ç€è‰²å™¨è¦ä»å“ªä¸ªä½ç½®è·å–è¿™ä¸ªå±æ€§ã€‚ä¾‹å¦‚ï¼Œé¡¶ç‚¹ç€è‰²å™¨ä¸­çš„ <code>[[location(0)]] x: vec3&lt;f32&gt;</code> å°†å¯¹åº” <code>Vertex</code> struct ä¸­çš„ <code>position</code> å­—æ®µï¼Œè€Œ <code>[[location(1)]] x: vec3&lt;f32&gt;</code> å°†å¯¹åº” <code>color</code> å­—æ®µã€‚</li> <li><code>format</code> å‘Šè¯‰ç€è‰²å™¨è¯¥å±æ€§çš„å½¢çŠ¶ã€‚<code>Float32x3</code> å¯¹åº”ç€è‰²å™¨ä»£ç ä¸­çš„ <code>vec3&lt;f32&gt;</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå±æ€§ä¸­å­˜å‚¨çš„æœ€å¤§å°ºå¯¸æ˜¯ <code>Float32x4</code>ï¼ˆæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯ <code>Uint32x4</code> å’Œ <code>Sint32x4</code>ï¼‰ã€‚å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨å°ºå¯¸æ¯” <code>Float32x4</code> æ›´å¤§çš„æ•°æ®æ—¶ï¼Œéœ€è¦è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ã€‚</li></ol> <p>å¯ä»¥ç”¨ç¤ºæ„å›¾ç›´è§‚åœ°è¡¨ç¤ºæˆ‘ä»¬æ‰€å®šä¹‰å‡ºçš„é¡¶ç‚¹ç¼“å†²åŒºï¼Œå…¶å¤§è‡´å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p><img src="/learn-wgpu-cn/assets/img/vb_desc.63afb652.png" alt="A figure of the VertexBufferLayout"></p> <p>ç°åœ¨æˆ‘ä»¬éœ€è¦ <code>Vertex</code> ä¸Šåˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä»¥è¿”å›ä¸Šé¢å®šä¹‰å‡ºçš„æè¿°ç¬¦é…ç½®ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>
<span class="token keyword">impl</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">desc</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span> <span class="token punctuation">{</span>
            array_stride<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">Vertex</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
            step_mode<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexStepMode</span><span class="token punctuation">::</span><span class="token class-name">Vertex</span><span class="token punctuation">,</span>
            attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
                <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x3</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span> <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token keyword">f32</span><span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    format<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexFormat</span><span class="token punctuation">::</span><span class="token class-name">Float32x3</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="note"><p>åƒä¸Šé¢è¿™æ ·é…ç½®å±æ€§æ˜¯éå¸¸å†—é•¿çš„ã€‚ä¸ºæ­¤å¯ä»¥ä½¿ç”¨ wgpu æä¾›çš„ <code>vertex_attr_array</code> å®æ¥åšä¸€äº›ç®€åŒ–ï¼Œä»è€Œä½¿ <code>VertexBufferLayout</code> å˜æˆè¿™æ ·ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span> <span class="token punctuation">{</span>
    array_stride<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">Vertex</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
    step_mode<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexStepMode</span><span class="token punctuation">::</span><span class="token class-name">Vertex</span><span class="token punctuation">,</span>
    attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token macro property">vertex_attr_array!</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token class-name">Float32x3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token class-name">Float32x3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è™½ç„¶å½±å“ä¸å¤§ï¼Œä½†æ³¨æ„ Rust ä¼šè®¤ä¸º <code>vertex_attr_array</code> çš„ç»“æœæ˜¯ä¸€ä¸ªä¸´æ—¶å€¼ï¼Œæ‰€ä»¥éœ€è¦åšç‚¹è°ƒæ•´æ‰èƒ½ä»å‡½æ•°ä¸­è¿”å›å®ƒã€‚ä¸ºæ­¤å¯ä»¥å°† <code>wgpu::VertexBufferLayout</code> çš„ lifetime æ”¹ä¸º <code>'static</code>ï¼Œæˆ–è€…<a href="https://github.com/gfx-rs/wgpu/discussions/1790#discussioncomment-1160378" target="_blank" rel="noopener noreferrer">ä½¿å…¶æˆä¸º <code>const</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">impl</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">ATTRIBS</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexAttribute</span><span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token macro property">vertex_attr_array!</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token class-name">Float32x3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token class-name">Float32x3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">fn</span> <span class="token function-definition function">desc</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span>mem<span class="token punctuation">;</span>

        <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexBufferLayout</span> <span class="token punctuation">{</span>
            array_stride<span class="token punctuation">:</span> <span class="token namespace">mem<span class="token punctuation">::</span></span><span class="token function">size_of</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferAddress</span><span class="token punctuation">,</span>
            step_mode<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexStepMode</span><span class="token punctuation">::</span><span class="token class-name">Vertex</span><span class="token punctuation">,</span>
            attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token constant">ATTRIBS</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”±äºç¬”è€…è®¤ä¸ºç°é˜¶æ®µæœ€å¥½ç›´è§‚åœ°å±•ç¤ºæ•°æ®å¦‚ä½•æ˜ å°„ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸ä¼šä½¿ç”¨è¿™ä¸ªå®ã€‚</p></div> <p>ç°åœ¨å°±å¯ä»¥åœ¨åˆ›å»º <code>render_pipeline</code> æ—¶é…ç½®å¥½é¡¶ç‚¹ç¼“å†²åŒºå¯¹åº”çš„æè¿°ç¬¦äº†ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> render_pipeline <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_render_pipeline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">RenderPipelineDescriptor</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    vertex<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">VertexState</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        buffers<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
            <span class="token class-name">Vertex</span><span class="token punctuation">::</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼šæˆ‘ä»¬éœ€è¦åœ¨ <code>render</code> æ–¹æ³•ä¸­å®é™…è®¾ç½®å¥½é¡¶ç‚¹ç¼“å†²åŒºï¼Œå¦åˆ™ç¨‹åºä¼šå´©æºƒï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// render()</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_pipeline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>render_pipeline<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// NEW!</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_vertex_buffer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>vertex_buffer<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
render_pass<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>set_vertex_buffer</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªé¡¶ç‚¹ç¼“å†²åŒºå¯¹åº”çš„æè¿°ç¬¦ç´¢å¼•ï¼Œå¯ä»¥ç”¨å®ƒåœ¨å¤šä¸ªé¡¶ç‚¹ç¼“å†²åŒºä¹‹é—´åˆ‡æ¢ã€‚</p> <p>ç¬¬äºŒä¸ªå‚æ•°ç”¨äºç¡®å®šè¦ä½¿ç”¨ç¼“å†²åŒºä¸­çš„å“ªä¸ªç‰‡æ–­ã€‚ç”±äºå¯ä»¥åœ¨ç¡¬ä»¶å…è®¸çš„å‰æä¸‹åœ¨ä¸€ä¸ªç¼“å†²åŒºä¸­å­˜å‚¨å°½å¯èƒ½å¤šçš„å¯¹è±¡ï¼Œæ‰€ä»¥ <code>slice</code> å…è®¸æˆ‘ä»¬ä»…ä½¿ç”¨ç¼“å†²åŒºä¸­çš„ä¸€éƒ¨åˆ†ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ <code>...</code> æ¥æŒ‡å®šä½¿ç”¨æ•´ä¸ªç¼“å†²åŒºã€‚</p> <p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¨åŠ è°ƒæ•´å¯¹ <code>render_pass.draw()</code> çš„è°ƒç”¨ï¼Œä»¥ä½¿ç”¨ç”± <code>VERTICES</code> æ‰€ç¡®å®šçš„é¡¶ç‚¹æ•°é‡ã€‚è¿™éœ€è¦åœ¨ <code>State</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>num_vertices</code>ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºç­‰äº <code>VERTICES.len()</code> å³å¯ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>

<span class="token keyword">struct</span> <span class="token type-definition class-name">State</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    num_vertices<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">State</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">let</span> num_vertices <span class="token operator">=</span> <span class="token constant">VERTICES</span><span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">u32</span><span class="token punctuation">;</span>

        <span class="token keyword">Self</span> <span class="token punctuation">{</span>
            surface<span class="token punctuation">,</span>
            device<span class="token punctuation">,</span>
            queue<span class="token punctuation">,</span>
            config<span class="token punctuation">,</span>
            render_pipeline<span class="token punctuation">,</span>
            vertex_buffer<span class="token punctuation">,</span>
            num_vertices<span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åå°±å¯ä»¥åœ¨ç»˜åˆ¶æ—¶ä¼ å…¥å®ƒäº†ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// render</span>
render_pass<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token keyword">self</span><span class="token punctuation">.</span>num_vertices<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨æˆ‘ä»¬çš„æ”¹å˜ç”Ÿæ•ˆå‰ï¼Œè¿˜éœ€è¦ç»§ç»­æ›´æ–°é¡¶ç‚¹ç€è‰²å™¨ï¼Œä»¥ä¾¿ä»é¡¶ç‚¹ç¼“å†²åŒºä¸­è·å–æ•°æ®ã€‚å¹¶ä¸”è¿˜è¦è®©å®ƒèƒ½ä¸€å¹¶è¯»å–é¡¶ç‚¹çš„é¢œè‰²ï¼š</p> <div class="language-wgsl extra-class"><pre class="language-text"><code>// é¡¶ç‚¹ç€è‰²å™¨

struct VertexInput {
    [[location(0)]] position: vec3&lt;f32&gt;;
    [[location(1)]] color: vec3&lt;f32&gt;;
};

struct VertexOutput {
    [[builtin(position)]] clip_position: vec4&lt;f32&gt;;
    [[location(0)]] color: vec3&lt;f32&gt;;
};

[[stage(vertex)]]
fn vs_main(
    model: VertexInput,
) -&gt; VertexOutput {
    var out: VertexOutput;
    out.color = model.color;
    out.clip_position = vec4&lt;f32&gt;(model.position, 1.0);
    return out;
}

// ç‰‡å…ƒç€è‰²å™¨

[[stage(fragment)]]
fn fs_main(in: VertexOutput) -&gt; [[location(0)]] vec4&lt;f32&gt; {
    return vec4&lt;f32&gt;(in.color, 1.0);
}
</code></pre></div><p>å¦‚æœè¿™äº›éƒ½åšå¯¹äº†ï¼Œé‚£ä¹ˆä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªè¿™æ ·çš„ä¸‰è§’å½¢ï¼š</p> <p><img src="/learn-wgpu-cn/assets/img/triangle.11560f32.png" alt="A colorful triangle"></p> <h2 id="ç´¢å¼•ç¼“å†²åŒº"><a href="#ç´¢å¼•ç¼“å†²åŒº" class="header-anchor">#</a> ç´¢å¼•ç¼“å†²åŒº</h2> <p>å°±æŠ€æœ¯ä¸Šè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ä¸<em>éœ€è¦</em>ç´¢å¼•ç¼“å†²åŒºï¼Œä½†å®ƒä»¬ä»ç„¶å¾ˆæœ‰ç”¨ã€‚å½“æˆ‘ä»¬å¼€å§‹ä½¿ç”¨å¸¦æœ‰å¤§é‡ä¸‰è§’å½¢çš„æ¨¡å‹æ—¶ï¼Œç´¢å¼•ç¼“å†²åŒºå°±ä¼šå‘æŒ¥ä½œç”¨ã€‚ä¾‹å¦‚å¯¹äºå¦‚ä¸‹æ‰€ç¤ºçš„äº”è¾¹å½¢ï¼š</p> <p><img src="/learn-wgpu-cn/assets/img/pentagon.2c2be93b.png" alt="A pentagon made of 3 triangles"></p> <p>å®ƒæ€»å…±æœ‰ 5 ä¸ªé¡¶ç‚¹å’Œ 3 ä¸ªä¸‰è§’å½¢ã€‚ç°åœ¨å¦‚æœæˆ‘ä»¬æƒ³çº¯ç²¹ç”¨é¡¶ç‚¹æ•°æ®æè¿°è¿™ä¸ªå½¢çŠ¶ï¼Œé‚£å°±éœ€è¦å½¢å¦‚ä»¥ä¸‹çš„æ•°æ®ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> <span class="token constant">VERTICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vertex</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>

    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>

    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>å¯ä»¥å‘ç°ï¼Œå…¶ä¸­æœ‰äº›é¡¶ç‚¹è¢«ä½¿ç”¨äº†ä¸æ­¢ä¸€æ¬¡ã€‚ä¾‹å¦‚ C å’Œ B è¢«ä½¿ç”¨äº†ä¸¤æ¬¡ï¼Œè€Œ E è¢«é‡å¤ä½¿ç”¨äº† 3 æ¬¡ã€‚å‡è®¾æ¯ä¸ªæµ®ç‚¹æ•°æ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬åœ¨ <code>VERTICES</code> ä¸­å®šä¹‰çš„ 216 ä¸ªå­—èŠ‚ä¸­æœ‰å¤šè¾¾ 96 ä¸ªæ˜¯å†—ä½™çš„æ•°æ®ã€‚å¦‚æœèƒ½åªæŠŠè¿™äº›é¡¶ç‚¹åˆ—å‡ºæ¥ä¸€æ¬¡ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿæ‰€å¹¸æˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹! è¿™å°±æ˜¯ç´¢å¼•ç¼“å†²åŒºå‘æŒ¥ä½œç”¨çš„åœ°æ–¹äº†ã€‚</p> <p>ç®€å•è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨ <code>VERTICES</code> ä¸­åªéœ€å¯¹æ¯ä¸ªé¡¶ç‚¹å­˜å‚¨å”¯ä¸€çš„ä¸€ä»½æ•°æ®ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªç¼“å†²åŒºï¼Œåœ¨å…¶ä¸­å­˜å‚¨å¯¹ <code>VERTICES</code> ä¸­å…ƒç´ çš„ç´¢å¼•ï¼Œå¹¶æ®æ­¤æ¥åˆ›å»ºä¸‰è§’å½¢ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä»¥æ­¤å»ºæ¨¡äº”è¾¹å½¢çš„ä¾‹å­ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// main.rs</span>
<span class="token keyword">const</span> <span class="token constant">VERTICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token class-name">Vertex</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    <span class="token class-name">Vertex</span> <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">INDICES</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token keyword">u16</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ <code>VERTICES</code> å ç”¨äº†å¤§çº¦ 120 ä¸ªå­—èŠ‚ï¼Œè€Œ <code>INDICES</code> åªæœ‰ 18 ä¸ªå­—èŠ‚ï¼ˆæ¯ä¸ª <code>u16</code> æœ‰ 2 å­—èŠ‚ï¼‰ã€‚è¿™æ—¶ wgpu ä¼šè‡ªåŠ¨å¢åŠ  2 ä¸ªå­—èŠ‚çš„å¡«å……ï¼Œä»¥ç¡®ä¿ç¼“å†²åŒºé•¿åº¦èƒ½è¢«å¯¹é½åˆ° 4 ä¸ªå­—èŠ‚ï¼Œä½†å°±ç®—è¿™æ · <code>INDICES</code> ä¹Ÿä»ç„¶åªæœ‰ 20 ä¸ªå­—èŠ‚ã€‚è¿™æ ·æˆ‘ä»¬çš„äº”è¾¹å½¢æ€»å…±åªéœ€è¦ 134 å­—èŠ‚æ¥è¡¨ç¤ºï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬èŠ‚çº¦äº† 82 ä¸ªå­—èŠ‚! è¿™çœ‹èµ·æ¥å¯èƒ½ä¸å¤šï¼Œä½†å½“å¤„ç†æ•°ä»¥åä¸‡è®¡çš„ä¸‰è§’å½¢æ—¶ï¼Œç´¢å¼•æœºåˆ¶å°±å¯ä»¥èŠ‚çœå¤§é‡çš„å†…å­˜ã€‚</p> <p>ä¸ºäº†ä½¿ç”¨ç´¢å¼•ï¼Œæœ‰å‡ ä¸ªéœ€è¦æ”¹å˜çš„åœ°æ–¹ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨äºå­˜å‚¨ç´¢å¼•çš„ç¼“å†²åŒºã€‚åœ¨ <code>State</code> çš„ <code>new()</code> æ–¹æ³•ä¸­åˆ›å»º <code>vertex_buffer</code> ä¹‹åï¼Œå°±éœ€è¦åˆ›å»ºå‡ºè¿™ä¸ª <code>index_buffer</code>ã€‚åŒæ—¶è¿˜è¦å°† <code>num_vertices</code> æ”¹ä¸º <code>num_indices</code>ï¼Œå¹¶è®¾ç½®å…¶å€¼ç­‰äº <code>INDICES.len()</code>ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> vertex_buffer <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_buffer_init</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span>util<span class="token punctuation">::</span></span><span class="token class-name">BufferInitDescriptor</span> <span class="token punctuation">{</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;Vertex Buffer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contents<span class="token punctuation">:</span> <span class="token namespace">bytemuck<span class="token punctuation">::</span></span><span class="token function">cast_slice</span><span class="token punctuation">(</span><span class="token constant">VERTICES</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferUsages</span><span class="token punctuation">::</span><span class="token constant">VERTEX</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// NEW!</span>
<span class="token keyword">let</span> index_buffer <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_buffer_init</span><span class="token punctuation">(</span>
    <span class="token operator">&amp;</span><span class="token namespace">wgpu<span class="token punctuation">::</span>util<span class="token punctuation">::</span></span><span class="token class-name">BufferInitDescriptor</span> <span class="token punctuation">{</span>
        label<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token string">&quot;Index Buffer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contents<span class="token punctuation">:</span> <span class="token namespace">bytemuck<span class="token punctuation">::</span></span><span class="token function">cast_slice</span><span class="token punctuation">(</span><span class="token constant">INDICES</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        usage<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">BufferUsages</span><span class="token punctuation">::</span><span class="token constant">INDEX</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num_indices <span class="token operator">=</span> <span class="token constant">INDICES</span><span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">u32</span><span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘ä»¬ä¸éœ€è¦ä¸ºç´¢å¼•æ•°ç»„å®ç° <code>Pod</code> å’Œ <code>Zeroable</code>ï¼Œå› ä¸º <code>bytemuck</code> å·²ç»ä¸º <code>u16</code> è¿™æ ·çš„åŸºæœ¬ç±»å‹å®ç°äº†å®ƒä»¬ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åªéœ€å°† <code>index_buffer</code> å’Œ<code>num_indices</code> æ·»åŠ åˆ° <code>State</code> struct ä¸­å³å¯ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> <span class="token type-definition class-name">State</span> <span class="token punctuation">{</span>
    surface<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Surface</span><span class="token punctuation">,</span>
    device<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Device</span><span class="token punctuation">,</span>
    queue<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Queue</span><span class="token punctuation">,</span>
    config<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">SurfaceConfiguration</span><span class="token punctuation">,</span>
    size<span class="token punctuation">:</span> <span class="token namespace">winit<span class="token punctuation">::</span>dpi<span class="token punctuation">::</span></span><span class="token class-name">PhysicalSize</span><span class="token operator">&lt;</span><span class="token keyword">u32</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    render_pipeline<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">RenderPipeline</span><span class="token punctuation">,</span>
    vertex_buffer<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Buffer</span><span class="token punctuation">,</span>
    <span class="token comment">// NEW!</span>
    index_buffer<span class="token punctuation">:</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">Buffer</span><span class="token punctuation">,</span> 
    num_indices<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶åå°±å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å¡«å……è¿™äº›å­—æ®µäº†ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">Self</span> <span class="token punctuation">{</span>
    surface<span class="token punctuation">,</span>
    device<span class="token punctuation">,</span>
    queue<span class="token punctuation">,</span>
    config<span class="token punctuation">,</span>
    size<span class="token punctuation">,</span>
    render_pipeline<span class="token punctuation">,</span>
    vertex_buffer<span class="token punctuation">,</span>
    <span class="token comment">// NEW!</span>
    index_buffer<span class="token punctuation">,</span>
    num_indices<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ›´æ–° <code>render()</code> æ–¹æ³•ä»¥ä½¿ç”¨ <code>index_buffer</code>ï¼š</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// render()</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_pipeline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>render_pipeline<span class="token punctuation">)</span><span class="token punctuation">;</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_vertex_buffer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>vertex_buffer<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_index_buffer</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>index_buffer<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token namespace">wgpu<span class="token punctuation">::</span></span><span class="token class-name">IndexFormat</span><span class="token punctuation">::</span><span class="token class-name">Uint16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.</span>
render_pass<span class="token punctuation">.</span><span class="token function">draw_indexed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token keyword">self</span><span class="token punctuation">.</span>num_indices<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.</span>
</code></pre></div><p>è¿™é‡Œæœ‰å‡ ä»¶äº‹éœ€è¦æ³¨æ„ã€‚</p> <ol><li>æ–¹æ³•åæ˜¯ <code>set_index_buffer</code> è€Œä¸æ˜¯ <code>set_index_buffers</code>ï¼Œæ¯æ¬¡åªèƒ½è®¾ç½®ä¸€ä¸ªç´¢å¼•ç¼“å†²åŒºã€‚</li> <li>å½“ä½¿ç”¨ç´¢å¼•ç¼“å†²åŒºæ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>draw_indexed</code>ã€‚ä¹‹å‰çš„ <code>draw</code> æ–¹æ³•ä¼šå¿½ç•¥ç´¢å¼•ç¼“å†²åŒºã€‚å¦å¤–è¿˜éœ€è¦ç¡®ä¿è¿™é‡Œä½¿ç”¨çš„æ˜¯ç´¢å¼•æ•°é‡ï¼ˆ<code>num_indices</code>ï¼‰è€Œéé¡¶ç‚¹æ•°é‡ï¼Œå¦åˆ™è¦ä¹ˆä¼šå‡ºç°æ¨¡å‹ç»˜åˆ¶é—®é¢˜ï¼Œè¦ä¹ˆä¼šå› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„ç´¢å¼•æ•°è€Œå¯¼è‡´æ–¹æ³• <code>panic</code>ã€‚</li></ol> <p>å®Œæˆè¿™äº›ä¹‹åï¼Œçª—å£é‡Œå°±åº”è¯¥æœ‰ä¸€ä¸ªç´«è‰²çš„äº”è¾¹å½¢äº†ï¼š</p> <p><img src="data:image/png;base64,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EAEqzVSkP4QGAP0mRIDKEyOLIzYAGCQhAlBTQgOAMhMiQC00dSoiNgCoKiEC1EYdY0RoAFBXQgSolSrGiNgAoImECECfCQ0AuJIQAWoneyoiNABg4YQIUEu9jhGxAQC9JUQAQmgAQDYhAtTW5VMRsQEA5SFEgFoTHwBQTu1BLwAAAGgeIQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQTIgAAQDohAgAApBMiAABAOiECAACkEyIAAEA6IQIAAKQbjoh4ZH1r0OsAAAAa5P8D75CpLfCP/NcAAAAASUVORK5CYII=" alt="Magenta pentagon in window"></p> <h2 id="é¢œè‰²æ ¡æ­£"><a href="#é¢œè‰²æ ¡æ­£" class="header-anchor">#</a> é¢œè‰²æ ¡æ­£</h2> <p>å¦‚æœä½ åœ¨ç°åœ¨çš„ç´«è‰²äº”è§’æ˜Ÿä¸Šä½¿ç”¨å–è‰²å™¨ï¼Œä½ ä¼šå¾—åˆ°çº¦ä¸º <code>#BC00BC</code> çš„åå…­è¿›åˆ¶è‰²å€¼ã€‚å¦‚æœç»§ç»­å°†å…¶è½¬ä¸º RGB å€¼ï¼Œä¼šå¾—åˆ° <code>(188, 0, 188)</code>ã€‚å°†è¿™äº›å€¼é™¤ä»¥ 255 ä»¥ä½¿å…¶è¿›å…¥<code>[0, 1]</code> èŒƒå›´åï¼Œæˆ‘ä»¬å¤§è‡´ä¼šå¾—åˆ° <code>(0.737254902, 0.0, 0.737254902)</code>ã€‚è¿™ä¸æˆ‘ä»¬ä¸ºé¡¶ç‚¹é¢œè‰²æ‰€èµ‹çš„å€¼æœ‰æ‰€ä¸åŒï¼Œåè€…æ˜¯ <code>(0.5, 0.0, 0.5)</code>ã€‚å‡ºç°è¿™ä¸€ç°è±¡çš„åŸå› ä¸è‰²å½©ç©ºé—´æœ‰å…³ã€‚</p> <p>å¤§å¤šæ•°æ˜¾ç¤ºå™¨ä½¿ç”¨çš„é¢œè‰²ç©ºé—´æ˜¯ sRGBã€‚æˆ‘ä»¬çš„ surface ä¸€èˆ¬ä½¿ç”¨ sRGB çº¹ç†æ ¼å¼ï¼ˆè¿™é‡Œå¾ˆå¯èƒ½ä¼šä½¿ç”¨ä» <code>surface.get_preferred_format()</code> è¿”å›çš„ç»“æœï¼‰ã€‚sRGB æ ¼å¼æ˜¯æ ¹æ®é¢œè‰²çš„ç›¸å¯¹äº®åº¦è€Œéå®é™…äº®åº¦æ¥å­˜å‚¨çš„ã€‚è¿™æ˜¯å› ä¸ºäººçœ¼å¯¹å…‰çº¿çš„æ„ŸçŸ¥å¹¶éçº¿æ€§ï¼Œåœ¨è¾ƒæ·±çš„é¢œè‰²ä¹‹é—´èƒ½æ„Ÿå—åˆ°æ›´å¤šçš„å·®å¼‚ã€‚</p> <p>ä½ å¯ä»¥ç”¨è¿™ä¸ªå…¬å¼å¾—åˆ°å¯¹æ­£ç¡®é¢œè‰²çš„è¿‘ä¼¼å€¼ï¼š<code>srgb_color = (rgb_color / 255) ^ 2.2</code>ã€‚åœ¨ RGB å€¼ä¸º <code>(188, 0, 188)</code> çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è·å¾— <code>(0.511397819, 0.0, 0.511397819)</code>ã€‚è¿™ä¸æˆ‘ä»¬çš„ <code>(0.5, 0.0, 0.5)</code> åªæœ‰ä¸€ç‚¹åå·®ã€‚è™½ç„¶ä½ å¯ä»¥é€šè¿‡è°ƒæ•´å…¬å¼æ¥è·å¾—æ‰€éœ€çš„æ•°å€¼ï¼Œä½†ä½¿ç”¨çº¹ç†å¯èƒ½ä¼šèŠ‚çœå¾ˆå¤šæ—¶é—´ï¼Œå› ä¸ºå®ƒä»¬é»˜è®¤å°±æ˜¯æŒ‰ sRGB æ ‡å‡†æ¥å­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¸ä¼šåƒé¡¶ç‚¹é¢œè‰²é‚£æ ·å‡ºç°é¢œè‰²ä¸å‡†ç¡®çš„æƒ…å†µã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ä»‹ç»çº¹ç†ã€‚</p> <h2 id="å°æµ‹éªŒ"><a href="#å°æµ‹éªŒ" class="header-anchor">#</a> å°æµ‹éªŒ</h2> <p>ä¸å¦¨ç”¨ä¸€ä¸ªé¡¶ç‚¹ç¼“å†²åŒºå’Œä¸€ä¸ªç´¢å¼•ç¼“å†²åŒºåˆ›å»ºä¸€ä¸ªæ¯”ä¸Šé¢æ›´å¤æ‚çš„å½¢çŠ¶ï¼ˆä¹Ÿå°±æ˜¯è¶…è¿‡ä¸‰ä¸ªä¸‰è§’å½¢ï¼‰ï¼Œå¹¶ç”¨ç©ºæ ¼é”®åœ¨è¿™ä¸¤è€…ä¹‹é—´åˆ‡æ¢ã€‚</p> <div class="auto-github-link"><a href="https://github.com/sotrh/learn-wgpu/tree/master/code/beginner/tutorial4-buffer/" target="_blank" rel="noopener noreferrer">Check out the code!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/24/2022, 4:18:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/learn-wgpu-cn/beginner/tutorial3-pipeline/" class="prev">
          ä½¿ç”¨ Pipeline
        </a></span> <span class="next"><a href="/learn-wgpu-cn/beginner/tutorial5-textures/">
          çº¹ç†ä¸ BindGroup
        </a>
        â†’
      </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/learn-wgpu-cn/assets/js/app.4ff5359b.js" defer></script><script src="/learn-wgpu-cn/assets/js/4.7de995c5.js" defer></script><script src="/learn-wgpu-cn/assets/js/10.7328fa8a.js" defer></script><script src="/learn-wgpu-cn/assets/js/25.997fcfd2.js" defer></script>
  </body>
</html>
